{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectWithoutProperties from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _excluded=[\"children\",\"style\"],_excluded2=[\"onFieldChange\",\"appointmentData\"];/*\r\n    Calendar component adapted from: https://devexpress.github.io/devextreme-reactive/react/scheduler/\r\n */import'../MainPanel.css';import Paper from'@material-ui/core/Paper';import{ViewState,EditingState,IntegratedEditing}from'@devexpress/dx-react-scheduler';import{Scheduler,WeekView,Appointments,AppointmentTooltip,AppointmentForm,DateNavigator,TodayButton,Toolbar,ConfirmationDialog}from'@devexpress/dx-react-scheduler-material-ui';import{makeStyles}from'@material-ui/core/styles';import{fade}from'@material-ui/core/styles/colorManipulator';import{useState,useEffect}from\"react\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Calendar(){/* ----------- SERVER FUNCTIONS ----------- */var startingList=[];var _useState=useState(startingList),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];function callGET(){return _callGET.apply(this,arguments);}function _callGET(){_callGET=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8000/rec-center\").then(function(res){return res.json();}).then(function(data){return startingList=data;}).catch(function(err){return err;});case 2:case\"end\":return _context.stop();}}},_callee);}));return _callGET.apply(this,arguments);}function callPOST(_x){return _callPOST.apply(this,arguments);}function _callPOST(){_callPOST=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(object){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://localhost:8000/rec-center',{method:'post',body:JSON.stringify(object),headers:{'Content-Type':'application/json'}}).then(function(data){return console.log('Added appointment');}).catch(function(err){return err;});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _callPOST.apply(this,arguments);}function callEDIT(_x2){return _callEDIT.apply(this,arguments);}function _callEDIT(){_callEDIT=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(object){var id;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:id=Object.keys(object)[0];console.log(object[id]);_context3.next=4;return fetch('http://localhost:8000/rec-center/'+id,{method:'PATCH',body:JSON.stringify(object[id]),headers:{'Content-Type':'application/json','x-Trigger':'CORS'}}).then(function(data){return console.log('Edited card');}).catch(function(err){return err;});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _callEDIT.apply(this,arguments);}function callDELETE(_x3){return _callDELETE.apply(this,arguments);}function _callDELETE(){_callDELETE=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch('http://localhost:8000/rec-center/'+id,{method:'delete'}).then(function(data){return console.log('Deleted appointment');}).catch(function(err){return err;});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _callDELETE.apply(this,arguments);}useEffect(function(){callGET().then(function(){return setList(startingList);}).catch(function(err){return err;});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);function commitChanges(_ref){var added=_ref.added,changed=_ref.changed,deleted=_ref.deleted;if(added){console.log('added chosen');callPOST(added).then(function(){return console.log(added);});callGET().then(function(data){return console.log(data);}).then(function(){return setList(startingList);});}if(changed){console.log('in edit');console.log(changed);callEDIT(changed).then(function(){return console.log(changed);});callGET().then(function(data){return console.log(data);}).then(function(){return setList(startingList);}).then(function(){return console.log(startingList);});}if(deleted!==undefined){console.log('in delete');console.log(deleted);callDELETE(deleted).then(function(){return console.log(deleted);});callGET().then(function(data){return console.log(data);}).then(function(){return setList(startingList);}).then(function(){return console.log(startingList);});}}/* ----------- STYLE AND COMPONENTS ----------- */var useStyles=makeStyles(function(theme){return{// DayScaleCell styling\ntoday:{backgroundColor:fade(theme.palette.primary.main,0.16)},weekend:{backgroundColor:fade(theme.palette.action.disabledBackground,0.06)},// TimeTableCell styling\ntodayCell:{backgroundColor:fade(theme.palette.primary.main,0.1),'&:hover':{backgroundColor:fade(theme.palette.primary.main,0.14)},'&:focus':{backgroundColor:fade(theme.palette.primary.main,0.16)}},weekendCell:{backgroundColor:fade(theme.palette.action.disabledBackground,0.04),'&:hover':{backgroundColor:fade(theme.palette.action.disabledBackground,0.04)},'&:focus':{backgroundColor:fade(theme.palette.action.disabledBackground,0.04)}},// Appointment styling\ntodayApp:{backgroundColor:'#0EA5E9',borderRadius:'8px'}};});// create the calendars top date bar\nvar DayScaleCell=function DayScaleCell(props){var style=useStyles();var startDate=props.startDate,today=props.today;/* color calendar days: today = highlight\r\n                                weekend (0, 6) = grey */if(today){return/*#__PURE__*/_jsx(WeekView.DayScaleCell,_objectSpread(_objectSpread({},props),{},{className:style.today}));}if(startDate.getDay()===0||startDate.getDay()===6){return/*#__PURE__*/_jsx(WeekView.DayScaleCell,_objectSpread(_objectSpread({},props),{},{className:style.weekend}));}return/*#__PURE__*/_jsx(WeekView.DayScaleCell,_objectSpread({},props));};// create the calendar's timeslots\nvar TimeTableCell=function TimeTableCell(props){var style=useStyles();var startDate=props.startDate;var date=new Date(startDate);/* color timeslot backgrounds: today = highlight\r\n                                       weekend (0, 6) = grey */if(date.getDate()===new Date().getDate()){return/*#__PURE__*/_jsx(WeekView.TimeTableCell,_objectSpread(_objectSpread({},props),{},{className:style.todayCell}));}if(date.getDay()===0||date.getDay()===6){return/*#__PURE__*/_jsx(WeekView.TimeTableCell,_objectSpread(_objectSpread({},props),{},{className:style.weekendCell}));}return/*#__PURE__*/_jsx(WeekView.TimeTableCell,_objectSpread({},props));};// create the appointments\nvar Appointment=function Appointment(_ref2){var children=_ref2.children,style=_ref2.style,restProps=_objectWithoutProperties(_ref2,_excluded);return/*#__PURE__*/_jsx(Appointments.Appointment,_objectSpread(_objectSpread({},restProps),{},{className:useStyles().todayApp,children:children}));};// create the add/edit form\nvar BasicLayout=function BasicLayout(_ref3){var onFieldChange=_ref3.onFieldChange,appointmentData=_ref3.appointmentData,restProps=_objectWithoutProperties(_ref3,_excluded2);var onEditLocation=function onEditLocation(nextValue){onFieldChange({location:nextValue});};var onEditClassSize=function onEditClassSize(nextValue){onFieldChange({maxClassSize:nextValue});};// TODO: get button working\nvar onEditVaccination=function onEditVaccination(nextValue){onFieldChange({vaccinationOnly:nextValue});};return/*#__PURE__*/_jsxs(AppointmentForm.BasicLayout,_objectSpread(_objectSpread({appointmentData:appointmentData,onFieldChange:onFieldChange},restProps),{},{children:[/*#__PURE__*/_jsx(AppointmentForm.Label,{text:\"Location\",type:\"title\"}),/*#__PURE__*/_jsx(AppointmentForm.TextEditor,{placeholder:\"Room location\",type:\"ordinaryTextEditor\",value:appointmentData.location,onValueChange:onEditLocation}),/*#__PURE__*/_jsx(AppointmentForm.Label,{text:\"Maximum Class Size\",type:\"title\"}),/*#__PURE__*/_jsx(AppointmentForm.TextEditor,{placeholder:\"0\",type:\"numberEditor\",value:appointmentData.maxClassSize,onValueChange:onEditClassSize}),/*#__PURE__*/_jsx(AppointmentForm.BooleanEditor,{label:\"Vaccinated attendents only?\",readOnly:false,value:appointmentData.vaccinatedOnly,onValueChange:onEditVaccination})]}));};var messages={moreInformationLabel:'Class Description'};var BoolEditor=function BoolEditor(props){return/*#__PURE__*/_jsx(AppointmentForm.BooleanEditor,_objectSpread(_objectSpread({},props),{},{readOnly:true}));};return/*#__PURE__*/_jsx(Paper,{id:\"calendar\",children:/*#__PURE__*/_jsxs(Scheduler,{data:list,locale:\"en-US\",children:[/*#__PURE__*/_jsx(ViewState,{}),/*#__PURE__*/_jsx(EditingState,{onCommitChanges:commitChanges}),/*#__PURE__*/_jsx(IntegratedEditing,{}),/*#__PURE__*/_jsx(WeekView,{startDayHour:9,endDayHour:19,timeTableCellComponent:TimeTableCell,dayScaleCellComponent:DayScaleCell}),/*#__PURE__*/_jsx(ConfirmationDialog,{}),/*#__PURE__*/_jsx(Toolbar,{}),/*#__PURE__*/_jsx(DateNavigator,{}),/*#__PURE__*/_jsx(TodayButton,{}),/*#__PURE__*/_jsx(Appointments,{appointmentComponent:Appointment}),/*#__PURE__*/_jsx(AppointmentTooltip,{showCloseButton:true,showOpenButton:true}),/*#__PURE__*/_jsx(AppointmentForm,{basicLayoutComponent:BasicLayout,booleanEditorComponent:BoolEditor,messages:messages})]})});}export default Calendar;","map":{"version":3,"sources":["C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/src/components/mainpanel/calendar/Calendar.js"],"names":["Paper","ViewState","EditingState","IntegratedEditing","Scheduler","WeekView","Appointments","AppointmentTooltip","AppointmentForm","DateNavigator","TodayButton","Toolbar","ConfirmationDialog","makeStyles","fade","useState","useEffect","moment","Calendar","startingList","list","setList","callGET","fetch","then","res","json","data","catch","err","callPOST","object","method","body","JSON","stringify","headers","console","log","callEDIT","id","Object","keys","callDELETE","commitChanges","added","changed","deleted","undefined","useStyles","theme","today","backgroundColor","palette","primary","main","weekend","action","disabledBackground","todayCell","weekendCell","todayApp","borderRadius","DayScaleCell","props","style","startDate","getDay","TimeTableCell","date","Date","getDate","Appointment","children","restProps","BasicLayout","onFieldChange","appointmentData","onEditLocation","nextValue","location","onEditClassSize","maxClassSize","onEditVaccination","vaccinationOnly","vaccinatedOnly","messages","moreInformationLabel","BoolEditor"],"mappings":"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","sourcesContent":["/*\r\n    Calendar component adapted from: https://devexpress.github.io/devextreme-reactive/react/scheduler/\r\n */\r\n\r\nimport '../MainPanel.css';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {\r\n    ViewState,\r\n    EditingState,\r\n    IntegratedEditing\r\n} from '@devexpress/dx-react-scheduler';\r\nimport {\r\n    Scheduler,\r\n    WeekView,\r\n    Appointments,\r\n    AppointmentTooltip,\r\n    AppointmentForm,\r\n    DateNavigator,\r\n    TodayButton,\r\n    Toolbar,\r\n    ConfirmationDialog\r\n} from '@devexpress/dx-react-scheduler-material-ui';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\nimport {useState, useEffect} from \"react\";\r\nimport moment from \"moment\";\r\n\r\n\r\n\r\n\r\nfunction Calendar() {\r\n\r\n    /* ----------- SERVER FUNCTIONS ----------- */\r\n    let startingList = [];\r\n    const [list, setList] = useState(startingList);\r\n\r\n    async function callGET() {\r\n        await fetch(\"http://localhost:8000/rec-center\")\r\n            .then(res => res.json())\r\n            .then(data => startingList = data)\r\n            .catch(err => err);\r\n    }\r\n\r\n    async function callPOST(object) {\r\n        await fetch('http://localhost:8000/rec-center', {\r\n            method: 'post',\r\n            body: JSON.stringify(object),\r\n            headers: {'Content-Type': 'application/json'}\r\n        }).then(data => console.log('Added appointment'))\r\n            .catch(err => err);\r\n    }\r\n\r\n    async function callEDIT(object) {\r\n        let id = Object.keys(object)[0];\r\n        console.log(object[id])\r\n        await fetch('http://localhost:8000/rec-center/' + id, {\r\n            method: 'PATCH',\r\n            body: JSON.stringify(object[id]),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'x-Trigger': 'CORS'\r\n            }\r\n        }).then(data => console.log('Edited card'))\r\n            .catch(err => err);\r\n    }\r\n\r\n    async function callDELETE(id) {\r\n        await fetch('http://localhost:8000/rec-center/' + id, {\r\n            method: 'delete',\r\n        }).then(data => console.log('Deleted appointment'))\r\n            .catch(err => err);\r\n    }\r\n\r\n    useEffect(() =>{\r\n        callGET()\r\n            .then(() => setList(startingList))\r\n            .catch((err) => err);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    function commitChanges({added, changed, deleted}) {\r\n        if (added) {\r\n            console.log('added chosen');\r\n            callPOST(added).then(() => console.log(added));\r\n            callGET().then((data) => console.log(data))\r\n                .then(() => setList(startingList));\r\n        }\r\n        if (changed) {\r\n            console.log('in edit')\r\n            console.log(changed);\r\n            callEDIT(changed).then(() => console.log(changed));\r\n            callGET().then((data) => console.log(data))\r\n                .then(() => setList(startingList))\r\n                .then(() => console.log(startingList));\r\n        }\r\n        if (deleted !== undefined) {\r\n            console.log('in delete');\r\n            console.log(deleted);\r\n            callDELETE(deleted).then(() => console.log(deleted));\r\n            callGET().then((data) => console.log(data))\r\n                .then(() => setList(startingList))\r\n                .then(() => console.log(startingList));\r\n        }\r\n    }\r\n\r\n    /* ----------- STYLE AND COMPONENTS ----------- */\r\n    const useStyles = makeStyles(theme => ({\r\n        // DayScaleCell styling\r\n        today: {\r\n            backgroundColor: fade(theme.palette.primary.main, 0.16),\r\n        },\r\n        weekend: {\r\n            backgroundColor: fade(theme.palette.action.disabledBackground, 0.06),\r\n        },\r\n\r\n        // TimeTableCell styling\r\n        todayCell: {\r\n            backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n            '&:hover': {\r\n                backgroundColor: fade(theme.palette.primary.main, 0.14),\r\n            },\r\n            '&:focus': {\r\n                backgroundColor: fade(theme.palette.primary.main, 0.16),\r\n            },\r\n        },\r\n        weekendCell: {\r\n            backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            '&:hover': {\r\n                backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            },\r\n            '&:focus': {\r\n                backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            },\r\n        },\r\n\r\n        // Appointment styling\r\n        todayApp: {\r\n            backgroundColor: '#0EA5E9',\r\n            borderRadius: '8px'\r\n        }\r\n\r\n    }));\r\n\r\n    // create the calendars top date bar\r\n    const DayScaleCell = (props) => {\r\n        const style = useStyles();\r\n        const { startDate, today } = props;\r\n\r\n        /* color calendar days: today = highlight\r\n                                weekend (0, 6) = grey */\r\n        if (today) {\r\n            return <WeekView.DayScaleCell {...props} className={style.today} />;\r\n        } if (startDate.getDay() === 0 || startDate.getDay() === 6) {\r\n            return <WeekView.DayScaleCell {...props} className={style.weekend} />;\r\n        } return <WeekView.DayScaleCell {...props} />;\r\n    };\r\n\r\n    // create the calendar's timeslots\r\n    const TimeTableCell = (props) => {\r\n        const style = useStyles();\r\n        const { startDate } = props;\r\n        const date = new Date(startDate);\r\n\r\n        /* color timeslot backgrounds: today = highlight\r\n                                       weekend (0, 6) = grey */\r\n        if (date.getDate() === new Date().getDate()) {\r\n            return <WeekView.TimeTableCell {...props} className={style.todayCell} />;\r\n        } if (date.getDay() === 0 || date.getDay() === 6) {\r\n            return <WeekView.TimeTableCell {...props} className={style.weekendCell} />;\r\n        } return <WeekView.TimeTableCell {...props} />;\r\n    };\r\n\r\n    // create the appointments\r\n    const Appointment = ({children, style, ...restProps}) => (\r\n        <Appointments.Appointment {...restProps} className={useStyles().todayApp} >\r\n            {children}\r\n        </Appointments.Appointment>\r\n    );\r\n\r\n    // create the add/edit form\r\n    const BasicLayout = ({ onFieldChange, appointmentData, ...restProps }) => {\r\n        const onEditLocation = (nextValue) => {\r\n            onFieldChange({ location: nextValue });\r\n        };\r\n\r\n        const onEditClassSize = (nextValue) => {\r\n            onFieldChange({ maxClassSize: nextValue });\r\n        }\r\n\r\n        // TODO: get button working\r\n        const onEditVaccination = (nextValue) => {\r\n            onFieldChange({ vaccinationOnly: nextValue });\r\n        }\r\n\r\n        return (\r\n            <AppointmentForm.BasicLayout\r\n                appointmentData={appointmentData}\r\n                onFieldChange={onFieldChange}\r\n                {...restProps}\r\n            >\r\n                <AppointmentForm.Label\r\n                    text=\"Location\"\r\n                    type=\"title\"\r\n                />\r\n                <AppointmentForm.TextEditor\r\n                    placeholder=\"Room location\"\r\n                    type=\"ordinaryTextEditor\"\r\n                    value={appointmentData.location}\r\n                    onValueChange={onEditLocation}\r\n                />\r\n                <AppointmentForm.Label\r\n                    text=\"Maximum Class Size\"\r\n                    type=\"title\"\r\n                />\r\n                <AppointmentForm.TextEditor\r\n                    placeholder=\"0\"\r\n                    type=\"numberEditor\"\r\n                    value={appointmentData.maxClassSize}\r\n                    onValueChange={onEditClassSize}\r\n                />\r\n                <AppointmentForm.BooleanEditor\r\n                    label=\"Vaccinated attendents only?\"\r\n                    readOnly={false}\r\n                    value={appointmentData.vaccinatedOnly}\r\n                    onValueChange={onEditVaccination}\r\n                />\r\n            </AppointmentForm.BasicLayout>\r\n        );\r\n    };\r\n\r\n    const messages = {\r\n        moreInformationLabel: 'Class Description',\r\n    };\r\n\r\n    const BoolEditor = (props) => {\r\n        return <AppointmentForm.BooleanEditor {...props} readOnly />;\r\n    }\r\n\r\n    return (\r\n        <Paper id='calendar'>\r\n            <Scheduler\r\n                data={list}\r\n                locale={\"en-US\"}\r\n            >\r\n                <ViewState />\r\n                <EditingState\r\n                    onCommitChanges={commitChanges}\r\n                />\r\n                <IntegratedEditing />\r\n                <WeekView\r\n                    startDayHour={9}\r\n                    endDayHour={19}\r\n                    timeTableCellComponent={TimeTableCell}\r\n                    dayScaleCellComponent={DayScaleCell}\r\n                />\r\n                <ConfirmationDialog />\r\n                <Toolbar />\r\n                <DateNavigator />\r\n                <TodayButton />\r\n                <Appointments\r\n                    appointmentComponent={Appointment}\r\n                />\r\n                <AppointmentTooltip\r\n                    showCloseButton\r\n                    showOpenButton\r\n                />\r\n                <AppointmentForm\r\n                    basicLayoutComponent={BasicLayout}\r\n                    booleanEditorComponent={BoolEditor}\r\n                    messages={messages}\r\n                />\r\n            </Scheduler>\r\n        </Paper>\r\n    );\r\n}\r\n\r\nexport default Calendar;"]},"metadata":{},"sourceType":"module"}
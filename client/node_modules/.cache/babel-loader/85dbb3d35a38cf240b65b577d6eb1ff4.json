{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectWithoutProperties from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _excluded=[\"children\",\"style\"],_excluded2=[\"children\",\"appointmentData\",\"classes\"],_excluded3=[\"children\",\"appointmentData\",\"classes\"],_excluded4=[\"classes\"];/*\r\n    Calendar component adapted from: https://devexpress.github.io/devextreme-reactive/react/scheduler/\r\n */import Paper from'@material-ui/core/Paper';import{ViewState}from'@devexpress/dx-react-scheduler';import{Scheduler,WeekView,Appointments,AppointmentTooltip,DateNavigator,TodayButton,Toolbar}from'@devexpress/dx-react-scheduler-material-ui';import{makeStyles}from'@material-ui/core/styles';import{fade}from'@material-ui/core/styles/colorManipulator';import{useState,useEffect}from\"react\";import'./Calendar.css';import IconButton from'@material-ui/core/IconButton';import AddIcon from'@material-ui/icons/Add';import Grid from'@material-ui/core/Grid';import Room from'@material-ui/icons/Room';import{withStyles}from'@material-ui/core/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserCalendar(){/* ----------- SERVER FUNCTIONS ----------- */var startingList=[];var _useState=useState(startingList),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];function callGET(){return _callGET.apply(this,arguments);}// TODO: implement once route is established\nfunction _callGET(){_callGET=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://rec-center-booking/user-cal\").then(function(res){return res.json();}).then(function(data){return startingList=data;}).catch(function(err){return err;});case 2:case\"end\":return _context.stop();}}},_callee);}));return _callGET.apply(this,arguments);}function callEDIT(_x){return _callEDIT.apply(this,arguments);}function _callEDIT(){_callEDIT=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://rec-center-booking/user-cal/'+id,{method:'PATCH',body:JSON.stringify(id),headers:{'Content-Type':'application/json','x-Trigger':'CORS'}}).then(function(data){return console.log('Edited card');}).catch(function(err){return err;});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _callEDIT.apply(this,arguments);}useEffect(function(){callGET().then(function(){return setList(startingList);}).catch(function(err){return err;});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);/* ----------- STYLE AND COMPONENTS ----------- */var useStyles=makeStyles(function(theme){return{// DayScaleCell styling\ntoday:{backgroundColor:fade(theme.palette.primary.main,0.16)},weekend:{backgroundColor:fade(theme.palette.action.disabledBackground,0.06)},// TimeTableCell styling\ntodayCell:{backgroundColor:fade(theme.palette.primary.main,0.1),'&:hover':{backgroundColor:fade(theme.palette.primary.main,0.14)},'&:focus':{backgroundColor:fade(theme.palette.primary.main,0.16)}},weekendCell:{backgroundColor:fade(theme.palette.action.disabledBackground,0.04),'&:hover':{backgroundColor:fade(theme.palette.action.disabledBackground,0.04)},'&:focus':{backgroundColor:fade(theme.palette.action.disabledBackground,0.04)}},// Appointment styling\ntodayApp:{backgroundColor:'#558d60',borderRadius:'8px'}};});// Tooltip styling\nvar style=function style(_ref){var palette=_ref.palette;return{icon:{color:palette.action.active},textCenter:{textAlign:'center'},headerColor:{backgroundColor:'#558d60'},header:{height:'260px',backgroundSize:'cover'},commandButton:{backgroundColor:'#96cfa9'}};};// Calendar's top date bar\nvar DayScaleCell=function DayScaleCell(props){var style=useStyles();var startDate=props.startDate,today=props.today;if(today){return/*#__PURE__*/_jsx(WeekView.DayScaleCell,_objectSpread(_objectSpread({},props),{},{className:style.today}));}if(startDate.getDay()===0||startDate.getDay()===6){return/*#__PURE__*/_jsx(WeekView.DayScaleCell,_objectSpread(_objectSpread({},props),{},{className:style.weekend}));}return/*#__PURE__*/_jsx(WeekView.DayScaleCell,_objectSpread({},props));};// Calendar's timeslots\nvar TimeTableCell=function TimeTableCell(props){var style=useStyles();var startDate=props.startDate;var date=new Date(startDate);if(date.getDate()===new Date().getDate()){return/*#__PURE__*/_jsx(WeekView.TimeTableCell,_objectSpread(_objectSpread({},props),{},{className:style.todayCell}));}if(date.getDay()===0||date.getDay()===6){return/*#__PURE__*/_jsx(WeekView.TimeTableCell,_objectSpread(_objectSpread({},props),{},{className:style.weekendCell}));}return/*#__PURE__*/_jsx(WeekView.TimeTableCell,_objectSpread({},props));};// Appointments\nvar Appointment=function Appointment(_ref2){var children=_ref2.children,style=_ref2.style,restProps=_objectWithoutProperties(_ref2,_excluded);return/*#__PURE__*/_jsx(Appointments.Appointment,_objectSpread(_objectSpread({},restProps),{},{className:useStyles().todayApp,children:children}));};var Header=withStyles(style,{name:'Header'})(function(_ref3){var children=_ref3.children,appointmentData=_ref3.appointmentData,classes=_ref3.classes,restProps=_objectWithoutProperties(_ref3,_excluded2);return/*#__PURE__*/_jsx(AppointmentTooltip.Header,_objectSpread(_objectSpread({},restProps),{},{className:classes.headerColor,appointmentData:appointmentData,children:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return callEDIT(appointmentData._id);},className:classes.commandButton,children:/*#__PURE__*/_jsx(AddIcon,{})})}));});var Content=withStyles(style,{name:'Content'})(function(_ref4){var children=_ref4.children,appointmentData=_ref4.appointmentData,classes=_ref4.classes,restProps=_objectWithoutProperties(_ref4,_excluded3);return/*#__PURE__*/_jsx(AppointmentTooltip.Content,_objectSpread(_objectSpread({},restProps),{},{appointmentData:appointmentData,children:/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:2,className:classes.textCenter,children:/*#__PURE__*/_jsx(Room,{className:classes.icon})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:/*#__PURE__*/_jsx(\"span\",{children:appointmentData.location})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,className:classes.textCenter,children:/*#__PURE__*/_jsx(Room,{className:classes.icon})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:/*#__PURE__*/_jsx(\"span\",{children:appointmentData.notes})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,className:classes.textCenter,children:/*#__PURE__*/_jsx(Room,{className:classes.icon})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Max \",appointmentData.maxClassSize,\" people in the class.\"]})})]})}));});var CommandButton=withStyles(style,{name:'CommandButton'})(function(_ref5){var classes=_ref5.classes,restProps=_objectWithoutProperties(_ref5,_excluded4);return/*#__PURE__*/_jsx(AppointmentTooltip.CommandButton,_objectSpread(_objectSpread({},restProps),{},{className:classes.commandButton}));});return/*#__PURE__*/_jsx(\"div\",{id:\"main-panel\",children:/*#__PURE__*/_jsx(Paper,{id:\"calendar\",children:/*#__PURE__*/_jsxs(Scheduler,{data:list,locale:\"en-US\",children:[/*#__PURE__*/_jsx(ViewState,{}),/*#__PURE__*/_jsx(WeekView,{startDayHour:9,endDayHour:19,timeTableCellComponent:TimeTableCell,dayScaleCellComponent:DayScaleCell}),/*#__PURE__*/_jsx(Toolbar,{}),/*#__PURE__*/_jsx(DateNavigator,{}),/*#__PURE__*/_jsx(TodayButton,{}),/*#__PURE__*/_jsx(Appointments,{appointmentComponent:Appointment}),/*#__PURE__*/_jsx(AppointmentTooltip,{headerComponent:Header,contentComponent:Content,commandButtonComponent:CommandButton,showCloseButton:true})]})})});}export default UserCalendar;","map":{"version":3,"sources":["C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/src/components/calendar/UserCalendar.js"],"names":["Paper","ViewState","Scheduler","WeekView","Appointments","AppointmentTooltip","DateNavigator","TodayButton","Toolbar","makeStyles","fade","useState","useEffect","IconButton","AddIcon","Grid","Room","withStyles","UserCalendar","startingList","list","setList","callGET","fetch","then","res","json","data","catch","err","callEDIT","id","method","body","JSON","stringify","headers","console","log","useStyles","theme","today","backgroundColor","palette","primary","main","weekend","action","disabledBackground","todayCell","weekendCell","todayApp","borderRadius","style","icon","color","active","textCenter","textAlign","headerColor","header","height","backgroundSize","commandButton","DayScaleCell","props","startDate","getDay","TimeTableCell","date","Date","getDate","Appointment","children","restProps","Header","name","appointmentData","classes","_id","Content","location","notes","maxClassSize","CommandButton"],"mappings":"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","sourcesContent":["/*\r\n    Calendar component adapted from: https://devexpress.github.io/devextreme-reactive/react/scheduler/\r\n */\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {\r\n    ViewState,\r\n} from '@devexpress/dx-react-scheduler';\r\nimport {\r\n    Scheduler,\r\n    WeekView,\r\n    Appointments,\r\n    AppointmentTooltip,\r\n    DateNavigator,\r\n    TodayButton,\r\n    Toolbar,\r\n} from '@devexpress/dx-react-scheduler-material-ui';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport {useState, useEffect} from \"react\";\r\nimport './Calendar.css'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Room from '@material-ui/icons/Room';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n\r\nfunction UserCalendar() {\r\n\r\n    /* ----------- SERVER FUNCTIONS ----------- */\r\n    let startingList = [];\r\n    const [list, setList] = useState(startingList);\r\n\r\n    async function callGET() {\r\n        await fetch(\"http://rec-center-booking/user-cal\")\r\n            .then(res => res.json())\r\n            .then(data => startingList = data)\r\n            .catch(err => err);\r\n    }\r\n\r\n    // TODO: implement once route is established\r\n    async function callEDIT(id) {\r\n        await fetch('http://rec-center-booking/user-cal/' + id, {\r\n            method: 'PATCH',\r\n            body: JSON.stringify(id),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'x-Trigger': 'CORS'\r\n            }\r\n        }).then(data => console.log('Edited card'))\r\n            .catch(err => err);\r\n    }\r\n\r\n    useEffect(() =>{\r\n        callGET()\r\n            .then(() => setList(startingList))\r\n            .catch((err) => err);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    /* ----------- STYLE AND COMPONENTS ----------- */\r\n    const useStyles = makeStyles(theme => ({\r\n        // DayScaleCell styling\r\n        today: {\r\n            backgroundColor: fade(theme.palette.primary.main, 0.16),\r\n        },\r\n        weekend: {\r\n            backgroundColor: fade(theme.palette.action.disabledBackground, 0.06),\r\n        },\r\n        // TimeTableCell styling\r\n        todayCell: {\r\n            backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n            '&:hover': {\r\n                backgroundColor: fade(theme.palette.primary.main, 0.14),\r\n            },\r\n            '&:focus': {\r\n                backgroundColor: fade(theme.palette.primary.main, 0.16),\r\n            },\r\n        },\r\n        weekendCell: {\r\n            backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            '&:hover': {\r\n                backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            },\r\n            '&:focus': {\r\n                backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            },\r\n        },\r\n        // Appointment styling\r\n        todayApp: {\r\n            backgroundColor: '#558d60',\r\n            borderRadius: '8px'\r\n        }\r\n    }));\r\n    // Tooltip styling\r\n    const style = ({ palette }) => ({\r\n        icon: {\r\n            color: palette.action.active,\r\n        },\r\n        textCenter: {\r\n            textAlign: 'center',\r\n        },\r\n        headerColor: {\r\n            backgroundColor: '#558d60',\r\n        },\r\n        header: {\r\n            height: '260px',\r\n            backgroundSize: 'cover',\r\n        },\r\n        commandButton: {\r\n            backgroundColor: '#96cfa9',\r\n        },\r\n    });\r\n\r\n    // Calendar's top date bar\r\n    const DayScaleCell = (props) => {\r\n        const style = useStyles();\r\n        const { startDate, today } = props;\r\n        if (today) {\r\n            return <WeekView.DayScaleCell {...props} className={style.today} />;\r\n        } if (startDate.getDay() === 0 || startDate.getDay() === 6) {\r\n            return <WeekView.DayScaleCell {...props} className={style.weekend} />;\r\n        } return <WeekView.DayScaleCell {...props} />;\r\n    };\r\n\r\n    // Calendar's timeslots\r\n    const TimeTableCell = (props) => {\r\n        const style = useStyles();\r\n        const { startDate } = props;\r\n        const date = new Date(startDate);\r\n        if (date.getDate() === new Date().getDate()) {\r\n            return <WeekView.TimeTableCell {...props} className={style.todayCell} />;\r\n        } if (date.getDay() === 0 || date.getDay() === 6) {\r\n            return <WeekView.TimeTableCell {...props} className={style.weekendCell} />;\r\n        } return <WeekView.TimeTableCell {...props} />;\r\n    };\r\n\r\n    // Appointments\r\n    const Appointment = ({children, style, ...restProps}) => (\r\n        <Appointments.Appointment {...restProps} className={useStyles().todayApp} >\r\n            {children}\r\n        </Appointments.Appointment>\r\n    );\r\n\r\n    const Header = withStyles(style, { name: 'Header' })(({children, appointmentData, classes, ...restProps}) => (\r\n        <AppointmentTooltip.Header\r\n            {...restProps}\r\n            className={classes.headerColor}\r\n            appointmentData={appointmentData}\r\n        >\r\n            <IconButton\r\n                onClick={() => callEDIT(appointmentData._id)}\r\n                className={classes.commandButton}\r\n            >\r\n                <AddIcon />\r\n            </IconButton>\r\n        </AppointmentTooltip.Header>\r\n    ));\r\n\r\n    const Content = withStyles(style, { name: 'Content' })(({children, appointmentData, classes, ...restProps}) => (\r\n        <AppointmentTooltip.Content {...restProps} appointmentData={appointmentData}>\r\n            <Grid container alignItems=\"center\">\r\n                <Grid item xs={2} className={classes.textCenter}>\r\n                    <Room className={classes.icon} />\r\n                </Grid>\r\n                <Grid item xs={10}>\r\n                    <span>{appointmentData.location}</span>\r\n                </Grid>\r\n                <Grid item xs={2} className={classes.textCenter}>\r\n                    <Room className={classes.icon} />\r\n                </Grid>\r\n                <Grid item xs={10}>\r\n                    <span>{appointmentData.notes}</span>\r\n                </Grid>\r\n                <Grid item xs={2} className={classes.textCenter}>\r\n                    <Room className={classes.icon} />\r\n                </Grid>\r\n                <Grid item xs={10}>\r\n                    <span>Max {appointmentData.maxClassSize} people in the class.</span>\r\n                </Grid>\r\n            </Grid>\r\n        </AppointmentTooltip.Content>\r\n    ));\r\n\r\n    const CommandButton = withStyles(style, { name: 'CommandButton' })(({classes, ...restProps}) => (\r\n        <AppointmentTooltip.CommandButton {...restProps} className={classes.commandButton} />\r\n    ));\r\n\r\n    return (\r\n        <div id='main-panel'>\r\n        <Paper id='calendar'>\r\n            <Scheduler\r\n                data={list}\r\n                locale={\"en-US\"}\r\n            >\r\n                <ViewState />\r\n                <WeekView\r\n                    startDayHour={9}\r\n                    endDayHour={19}\r\n                    timeTableCellComponent={TimeTableCell}\r\n                    dayScaleCellComponent={DayScaleCell}\r\n                />\r\n                <Toolbar />\r\n                <DateNavigator />\r\n                <TodayButton />\r\n                <Appointments\r\n                    appointmentComponent={Appointment}\r\n                />\r\n                <AppointmentTooltip\r\n                    headerComponent={Header}\r\n                    contentComponent={Content}\r\n                    commandButtonComponent={CommandButton}\r\n                    showCloseButton\r\n                />\r\n            </Scheduler>\r\n        </Paper>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default UserCalendar;"]},"metadata":{},"sourceType":"module"}
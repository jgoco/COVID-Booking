{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jamie\\\\Documents\\\\Projects\\\\COVID-Booking\\\\COVID-Booking\\\\client\\\\src\\\\components\\\\mainpanel\\\\calendar\\\\Calendar.js\",\n    _s4 = $RefreshSig$();\n\n/*\r\n    Calendar component adapted from: https://devexpress.github.io/devextreme-reactive/react/scheduler/\r\n */\nimport '../MainPanel.css';\nimport Paper from '@material-ui/core/Paper';\nimport { ViewState, EditingState, IntegratedEditing } from '@devexpress/dx-react-scheduler';\nimport { Scheduler, WeekView, Appointments, AppointmentTooltip, AppointmentForm, DateNavigator, TodayButton, Toolbar, ConfirmationDialog } from '@devexpress/dx-react-scheduler-material-ui';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Calendar() {\n  _s4();\n\n  var _s = $RefreshSig$(),\n      _s2 = $RefreshSig$(),\n      _s3 = $RefreshSig$();\n\n  /* ----------- SERVER FUNCTIONS ----------- */\n  let startingList = [];\n  const [list, setList] = useState(startingList);\n\n  async function callGET() {\n    await fetch(\"http://localhost:8000/rec-center\").then(res => res.json()).then(data => startingList = data).catch(err => err);\n  }\n\n  async function callPOST(object) {\n    await fetch('http://localhost:8000/rec-center', {\n      method: 'post',\n      body: JSON.stringify(object),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(data => console.log('Added appointment')).catch(err => err);\n  }\n\n  async function callEDIT(object) {\n    let id = Object.keys(object)[0];\n    console.log(object[id]);\n    await fetch('http://localhost:8000/rec-center/' + id, {\n      method: 'PATCH',\n      body: JSON.stringify(object[id]),\n      headers: {\n        'Content-Type': 'application/json',\n        'x-Trigger': 'CORS'\n      }\n    }).then(data => console.log('Edited card')).catch(err => err);\n  }\n\n  async function callDELETE(id) {\n    await fetch('http://localhost:8000/rec-center/' + id, {\n      method: 'delete'\n    }).then(data => console.log('Deleted appointment')).catch(err => err);\n  }\n\n  useEffect(() => {\n    callGET().then(() => setList(startingList)).catch(err => err); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function commitChanges({\n    added,\n    changed,\n    deleted\n  }) {\n    if (added) {\n      console.log('added chosen');\n      callPOST(added).then(() => console.log(added));\n      callGET().then(data => console.log(data)).then(() => setList(startingList));\n    }\n\n    if (changed) {\n      callEDIT(changed).then(() => console.log(changed));\n      callGET().then(data => console.log(data)).then(() => setList(startingList)).then(() => console.log(startingList));\n    }\n\n    if (deleted !== undefined) {\n      // TODO: check what deleted is\n      callDELETE(deleted).then(() => console.log(deleted));\n      callGET().then(data => console.log(data)).then(() => setList(startingList)).then(() => console.log(startingList));\n    }\n  }\n  /* ----------- STYLE AND COMPONENTS ----------- */\n\n\n  const useStyles = makeStyles(theme => ({\n    // DayScaleCell styling\n    today: {\n      backgroundColor: fade(theme.palette.primary.main, 0.16)\n    },\n    weekend: {\n      backgroundColor: fade(theme.palette.action.disabledBackground, 0.06)\n    },\n    // TimeTableCell styling\n    todayCell: {\n      backgroundColor: fade(theme.palette.primary.main, 0.1),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.primary.main, 0.14)\n      },\n      '&:focus': {\n        backgroundColor: fade(theme.palette.primary.main, 0.16)\n      }\n    },\n    weekendCell: {\n      backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.action.disabledBackground, 0.04)\n      },\n      '&:focus': {\n        backgroundColor: fade(theme.palette.action.disabledBackground, 0.04)\n      }\n    },\n    // Appointment styling\n    todayApp: {\n      backgroundColor: '#0EA5E9',\n      borderRadius: '8px'\n    }\n  })); // create the calendars top date bar\n\n  const DayScaleCell = props => {\n    _s();\n\n    const style = useStyles();\n    const {\n      startDate,\n      today\n    } = props;\n    /* color calendar days: today = highlight\r\n                            weekend (0, 6) = grey */\n\n    if (today) {\n      return /*#__PURE__*/_jsxDEV(WeekView.DayScaleCell, { ...props,\n        className: style.today\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 20\n      }, this);\n    }\n\n    if (startDate.getDay() === 0 || startDate.getDay() === 6) {\n      return /*#__PURE__*/_jsxDEV(WeekView.DayScaleCell, { ...props,\n        className: style.weekend\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(WeekView.DayScaleCell, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 18\n    }, this);\n  }; // create the calendar's timeslots\n\n\n  _s(DayScaleCell, \"mZCnhBR0q0OTgm1BnUIehJ8zoUE=\", false, function () {\n    return [useStyles];\n  });\n\n  const TimeTableCell = props => {\n    _s2();\n\n    const style = useStyles();\n    const {\n      startDate\n    } = props;\n    const date = new Date(startDate);\n    /* color timeslot backgrounds: today = highlight\r\n                                   weekend (0, 6) = grey */\n\n    if (date.getDate() === new Date().getDate()) {\n      return /*#__PURE__*/_jsxDEV(WeekView.TimeTableCell, { ...props,\n        className: style.todayCell\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 20\n      }, this);\n    }\n\n    if (date.getDay() === 0 || date.getDay() === 6) {\n      return /*#__PURE__*/_jsxDEV(WeekView.TimeTableCell, { ...props,\n        className: style.weekendCell\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(WeekView.TimeTableCell, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 18\n    }, this);\n  }; // create the appointments\n\n\n  _s2(TimeTableCell, \"mZCnhBR0q0OTgm1BnUIehJ8zoUE=\", false, function () {\n    return [useStyles];\n  });\n\n  const Appointment = ({\n    children,\n    style,\n    ...restProps\n  }) => {\n    _s3();\n\n    return /*#__PURE__*/_jsxDEV(Appointments.Appointment, { ...restProps,\n      className: useStyles().todayApp,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }, this);\n  }; // create the add/edit form\n\n\n  _s3(Appointment, \"LpG94fGMPG7B/LCQ+ela2fKlpdc=\", false, function () {\n    return [useStyles];\n  });\n\n  const BasicLayout = ({\n    onFieldChange,\n    appointmentData,\n    ...restProps\n  }) => {\n    const onEditLocation = nextValue => {\n      onFieldChange({\n        location: nextValue\n      });\n    };\n\n    const onEditClassSize = nextValue => {\n      onFieldChange({\n        maxClassSize: nextValue\n      });\n    };\n\n    return /*#__PURE__*/_jsxDEV(AppointmentForm.BasicLayout, {\n      appointmentData: appointmentData,\n      onFieldChange: onFieldChange,\n      ...restProps,\n      children: [/*#__PURE__*/_jsxDEV(AppointmentForm.Label, {\n        text: \"Location\",\n        type: \"title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AppointmentForm.TextEditor, {\n        placeholder: \"Description\",\n        type: \"noteTextEditor\",\n        value: appointmentData.location,\n        onValueChange: onEditLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AppointmentForm.Label, {\n        text: \"Maximum Class Size\",\n        type: \"title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AppointmentForm.TextEditor, {\n        placeholder: \"0\",\n        type: \"numberEditor\",\n        value: appointmentData.maxClassSize,\n        onValueChange: onEditClassSize\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AppointmentForm.Label, {\n        text: \"Vaccinated only\",\n        type: \"title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AppointmentForm.BooleanEditor, {\n        onChange: () => console.log('checked')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, this);\n  };\n\n  const messages = {\n    moreInformationLabel: 'Class Description'\n  };\n\n  const BoolEditor = props => {\n    if (props.type === '') ;\n  };\n\n  const TextEditor = props => {\n    // eslint-disable-next-line react/destructuring-assignment\n    //if (props.type === 'multilineTextEditor') {\n    //    return null;\n    //}\n    return /*#__PURE__*/_jsxDEV(AppointmentForm.TextEditor, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 16\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    id: \"calendar\",\n    children: /*#__PURE__*/_jsxDEV(Scheduler, {\n      data: list,\n      children: [/*#__PURE__*/_jsxDEV(ViewState, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(EditingState, {\n        onCommitChanges: commitChanges\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IntegratedEditing, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(WeekView, {\n        startDayHour: 9,\n        endDayHour: 19,\n        timeTableCellComponent: TimeTableCell,\n        dayScaleCellComponent: DayScaleCell\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ConfirmationDialog, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Toolbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DateNavigator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TodayButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Appointments, {\n        appointmentComponent: Appointment\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AppointmentTooltip, {\n        showCloseButton: true,\n        showOpenButton: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AppointmentForm, {\n        basicLayoutComponent: BasicLayout,\n        textEditorComponent: TextEditor,\n        messages: messages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 238,\n    columnNumber: 9\n  }, this);\n}\n\n_s4(Calendar, \"XkQvQLxyhZOzycrP/qlMhkxv56k=\");\n\n_c = Calendar;\nexport default Calendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"sources":["C:/Users/jamie/Documents/Projects/COVID-Booking/COVID-Booking/client/src/components/mainpanel/calendar/Calendar.js"],"names":["Paper","ViewState","EditingState","IntegratedEditing","Scheduler","WeekView","Appointments","AppointmentTooltip","AppointmentForm","DateNavigator","TodayButton","Toolbar","ConfirmationDialog","makeStyles","fade","useState","useEffect","Calendar","startingList","list","setList","callGET","fetch","then","res","json","data","catch","err","callPOST","object","method","body","JSON","stringify","headers","console","log","callEDIT","id","Object","keys","callDELETE","commitChanges","added","changed","deleted","undefined","useStyles","theme","today","backgroundColor","palette","primary","main","weekend","action","disabledBackground","todayCell","weekendCell","todayApp","borderRadius","DayScaleCell","props","style","startDate","getDay","TimeTableCell","date","Date","getDate","Appointment","children","restProps","BasicLayout","onFieldChange","appointmentData","onEditLocation","nextValue","location","onEditClassSize","maxClassSize","messages","moreInformationLabel","BoolEditor","type","TextEditor"],"mappings":"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","sourcesContent":["/*\r\n    Calendar component adapted from: https://devexpress.github.io/devextreme-reactive/react/scheduler/\r\n */\r\n\r\nimport '../MainPanel.css';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {\r\n    ViewState,\r\n    EditingState,\r\n    IntegratedEditing\r\n} from '@devexpress/dx-react-scheduler';\r\nimport {\r\n    Scheduler,\r\n    WeekView,\r\n    Appointments,\r\n    AppointmentTooltip,\r\n    AppointmentForm,\r\n    DateNavigator,\r\n    TodayButton,\r\n    Toolbar,\r\n    ConfirmationDialog\r\n} from '@devexpress/dx-react-scheduler-material-ui';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\nimport {useState, useEffect} from \"react\";\r\n\r\nfunction Calendar() {\r\n\r\n    /* ----------- SERVER FUNCTIONS ----------- */\r\n    let startingList = [];\r\n    const [list, setList] = useState(startingList);\r\n\r\n    async function callGET() {\r\n        await fetch(\"http://localhost:8000/rec-center\")\r\n            .then(res => res.json())\r\n            .then(data => startingList = data)\r\n            .catch(err => err);\r\n    }\r\n\r\n    async function callPOST(object) {\r\n        await fetch('http://localhost:8000/rec-center', {\r\n            method: 'post',\r\n            body: JSON.stringify(object),\r\n            headers: {'Content-Type': 'application/json'}\r\n        }).then(data => console.log('Added appointment'))\r\n            .catch(err => err);\r\n    }\r\n\r\n    async function callEDIT(object) {\r\n        let id = Object.keys(object)[0];\r\n        console.log(object[id])\r\n        await fetch('http://localhost:8000/rec-center/' + id, {\r\n            method: 'PATCH',\r\n            body: JSON.stringify(object[id]),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'x-Trigger': 'CORS'\r\n            }\r\n        }).then(data => console.log('Edited card'))\r\n            .catch(err => err);\r\n    }\r\n\r\n    async function callDELETE(id) {\r\n        await fetch('http://localhost:8000/rec-center/' + id, {\r\n            method: 'delete',\r\n        }).then(data => console.log('Deleted appointment'))\r\n            .catch(err => err);\r\n    }\r\n\r\n    useEffect(() =>{\r\n        callGET()\r\n            .then(() => setList(startingList))\r\n            .catch((err) => err);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    function commitChanges({added, changed, deleted}) {\r\n        if (added) {\r\n            console.log('added chosen');\r\n            callPOST(added).then(() => console.log(added));\r\n            callGET().then((data) => console.log(data))\r\n                .then(() => setList(startingList));\r\n        }\r\n        if (changed) {\r\n            callEDIT(changed).then(() => console.log(changed));\r\n            callGET().then((data) => console.log(data))\r\n                .then(() => setList(startingList))\r\n                .then(() => console.log(startingList));\r\n        }\r\n        if (deleted !== undefined) {\r\n            // TODO: check what deleted is\r\n            callDELETE(deleted).then(() => console.log(deleted));\r\n            callGET().then((data) => console.log(data))\r\n                .then(() => setList(startingList))\r\n                .then(() => console.log(startingList));\r\n        }\r\n    }\r\n\r\n    /* ----------- STYLE AND COMPONENTS ----------- */\r\n    const useStyles = makeStyles(theme => ({\r\n        // DayScaleCell styling\r\n        today: {\r\n            backgroundColor: fade(theme.palette.primary.main, 0.16),\r\n        },\r\n        weekend: {\r\n            backgroundColor: fade(theme.palette.action.disabledBackground, 0.06),\r\n        },\r\n\r\n        // TimeTableCell styling\r\n        todayCell: {\r\n            backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n            '&:hover': {\r\n                backgroundColor: fade(theme.palette.primary.main, 0.14),\r\n            },\r\n            '&:focus': {\r\n                backgroundColor: fade(theme.palette.primary.main, 0.16),\r\n            },\r\n        },\r\n        weekendCell: {\r\n            backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            '&:hover': {\r\n                backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            },\r\n            '&:focus': {\r\n                backgroundColor: fade(theme.palette.action.disabledBackground, 0.04),\r\n            },\r\n        },\r\n\r\n        // Appointment styling\r\n        todayApp: {\r\n            backgroundColor: '#0EA5E9',\r\n            borderRadius: '8px'\r\n        }\r\n\r\n    }));\r\n\r\n    // create the calendars top date bar\r\n    const DayScaleCell = (props) => {\r\n        const style = useStyles();\r\n        const { startDate, today } = props;\r\n\r\n        /* color calendar days: today = highlight\r\n                                weekend (0, 6) = grey */\r\n        if (today) {\r\n            return <WeekView.DayScaleCell {...props} className={style.today} />;\r\n        } if (startDate.getDay() === 0 || startDate.getDay() === 6) {\r\n            return <WeekView.DayScaleCell {...props} className={style.weekend} />;\r\n        } return <WeekView.DayScaleCell {...props} />;\r\n    };\r\n\r\n    // create the calendar's timeslots\r\n    const TimeTableCell = (props) => {\r\n        const style = useStyles();\r\n        const { startDate } = props;\r\n        const date = new Date(startDate);\r\n\r\n        /* color timeslot backgrounds: today = highlight\r\n                                       weekend (0, 6) = grey */\r\n        if (date.getDate() === new Date().getDate()) {\r\n            return <WeekView.TimeTableCell {...props} className={style.todayCell} />;\r\n        } if (date.getDay() === 0 || date.getDay() === 6) {\r\n            return <WeekView.TimeTableCell {...props} className={style.weekendCell} />;\r\n        } return <WeekView.TimeTableCell {...props} />;\r\n    };\r\n\r\n    // create the appointments\r\n    const Appointment = ({children, style, ...restProps}) => (\r\n        <Appointments.Appointment {...restProps} className={useStyles().todayApp} >\r\n            {children}\r\n        </Appointments.Appointment>\r\n    );\r\n\r\n    // create the add/edit form\r\n    const BasicLayout = ({ onFieldChange, appointmentData, ...restProps }) => {\r\n        const onEditLocation = (nextValue) => {\r\n            onFieldChange({ location: nextValue });\r\n        };\r\n\r\n        const onEditClassSize = (nextValue) => {\r\n            onFieldChange({ maxClassSize: nextValue });\r\n        }\r\n\r\n        return (\r\n            <AppointmentForm.BasicLayout\r\n                appointmentData={appointmentData}\r\n                onFieldChange={onFieldChange}\r\n                {...restProps}\r\n            >\r\n                <AppointmentForm.Label\r\n                    text=\"Location\"\r\n                    type=\"title\"\r\n                />\r\n                <AppointmentForm.TextEditor\r\n                    placeholder=\"Description\"\r\n                    type=\"noteTextEditor\"\r\n                    value={appointmentData.location}\r\n                    onValueChange={onEditLocation}\r\n                />\r\n                <AppointmentForm.Label\r\n                    text=\"Maximum Class Size\"\r\n                    type=\"title\"\r\n                />\r\n                <AppointmentForm.TextEditor\r\n                    placeholder=\"0\"\r\n                    type=\"numberEditor\"\r\n                    value={appointmentData.maxClassSize}\r\n                    onValueChange={onEditClassSize}\r\n                />\r\n                <AppointmentForm.Label\r\n                    text=\"Vaccinated only\"\r\n                    type=\"title\"\r\n                />\r\n                <AppointmentForm.BooleanEditor\r\n                    onChange={()=> console.log('checked')}\r\n                />\r\n            </AppointmentForm.BasicLayout>\r\n        );\r\n    };\r\n\r\n    const messages = {\r\n        moreInformationLabel: 'Class Description',\r\n    };\r\n\r\n    const BoolEditor = (props) => {\r\n        if (props.type === '');\r\n    }\r\n\r\n    const TextEditor = (props) => {\r\n        // eslint-disable-next-line react/destructuring-assignment\r\n        //if (props.type === 'multilineTextEditor') {\r\n        //    return null;\r\n        //}\r\n        return <AppointmentForm.TextEditor {...props} />;\r\n    };\r\n\r\n    return (\r\n        <Paper id='calendar'>\r\n            <Scheduler\r\n                data={list}\r\n            >\r\n                <ViewState />\r\n                <EditingState\r\n                    onCommitChanges={commitChanges}\r\n                />\r\n                <IntegratedEditing />\r\n                <WeekView\r\n                    startDayHour={9}\r\n                    endDayHour={19}\r\n                    timeTableCellComponent={TimeTableCell}\r\n                    dayScaleCellComponent={DayScaleCell}\r\n                />\r\n                <ConfirmationDialog />\r\n                <Toolbar />\r\n                <DateNavigator />\r\n                <TodayButton />\r\n                <Appointments\r\n                    appointmentComponent={Appointment}\r\n                />\r\n                <AppointmentTooltip\r\n                    showCloseButton\r\n                    showOpenButton\r\n                />\r\n                <AppointmentForm\r\n                    basicLayoutComponent={BasicLayout}\r\n                    textEditorComponent={TextEditor}\r\n                    messages={messages}\r\n                />\r\n            </Scheduler>\r\n        </Paper>\r\n    );\r\n}\r\n\r\nexport default Calendar;"]},"metadata":{},"sourceType":"module"}